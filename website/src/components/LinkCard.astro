---
interface Props {
  id: string;
  url: string;
  title: string;
  summary: string;
  tags: string[];
  dateShared: string;
  thumbnail?: string | null;
}

const { id, url, title, summary, tags, dateShared, thumbnail } = Astro.props;

// Format the date
const formattedDate = new Date(dateShared).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric'
});

// Get domain from URL
const domain = new URL(url).hostname.replace('www.', '');
---

<article class="group bg-[--color-bg-card] border border-[--color-terminal-green]/30 hover:border-[--color-terminal-green] transition-all duration-300 relative overflow-hidden">
  <!-- Hover glow effect -->
  <div class="absolute inset-0 bg-[--color-terminal-green]/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
  
  <a href={`/links/${id}`} class="block p-6 relative z-10">
    <!-- Header with domain and date -->
    <div class="flex items-center justify-between mb-3 text-sm font-mono">
      <span class="text-[--color-terminal-green] flex items-center gap-2">
        <span class="text-[--color-text-dim]">ðŸ“¡</span>
        {domain}
      </span>
      <span class="text-[--color-text-dim]">{formattedDate}</span>
    </div>
    
    <!-- Title -->
    <h3 class="text-lg font-bold text-[--color-text] group-hover:text-[--color-terminal-green] transition-colors mb-3 line-clamp-2">
      {title}
    </h3>
    
    <!-- Summary -->
    <p class="text-[--color-text-dim] text-sm mb-4 line-clamp-3 leading-relaxed">
      {summary}
    </p>
    
    <!-- Tags -->
    <div class="flex flex-wrap gap-2">
      {tags.slice(0, 4).map((tag) => (
        <span class="px-2 py-1 text-xs font-mono bg-[--color-terminal-green]/10 text-[--color-terminal-green] border border-[--color-terminal-green]/30">
          #{tag}
        </span>
      ))}
      {tags.length > 4 && (
        <span class="px-2 py-1 text-xs font-mono text-[--color-text-dim]">
          +{tags.length - 4} more
        </span>
      )}
    </div>
  </a>
  
  <!-- External link indicator -->
  <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
    <span class="text-[--color-terminal-green] text-lg">â†—</span>
  </div>
  
  <!-- Corner decorations -->
  <div class="absolute top-0 left-0 w-3 h-3 border-t-2 border-l-2 border-[--color-terminal-green] opacity-0 group-hover:opacity-100 transition-opacity"></div>
  <div class="absolute bottom-0 right-0 w-3 h-3 border-b-2 border-r-2 border-[--color-terminal-green] opacity-0 group-hover:opacity-100 transition-opacity"></div>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
